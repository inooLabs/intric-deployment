# Intric Helm Chart - Override Values Example
# Copy this file to values-override.yaml and customize for your deployment
# Deploy with: helm install intric ./intric-helm -f values-override.yaml
# NOTE: values.yaml now uses list-style env (name/value). Overriding env replaces the full list.

# =============================================================================
# REQUIRED: Image Pull Credentials
# =============================================================================
intricImagePullCredentials:
  registry: ghcr.io
  username: REPLACE_THIS
  password: REPLACE_THIS

# =============================================================================
# REQUIRED: Domain Configuration
# =============================================================================
ingress:
  enabled: true
  className: traefik
  frontendHost: REPLACE_THIS  # ex: company.intric.ai
  backendHost: REPLACE_THIS  # ex: api.company.intric.ai
  zitadelHost: REPLACE_THIS_ONLY_IF_YOU_ARE_SELF_HOSTING_ZITADEL  # ex: login.company.intric.ai
  tls:
    enabled: true
  certManager:
    enabled: true
    clusterIssuer: REPLACE_THIS_WITH_YOUR_CLUSTER_ISSUER  # kubectl get clusterissuer

# =============================================================================
# OPTIONAL: Zitadel Configuration
# =============================================================================
zitadel:
  enabled: true
  env:
    - name: ZITADEL_MASTERKEY
      value: "REPLACE_THIS_WITH_32_CHARACTER_KEY"  # Use: openssl rand -base64 32 | head -c 32
    - name: ZITADEL_EXTERNALDOMAIN
      value: "REPLACE_THIS"  # ex: login.company.intric.ai (without https://)
    - name: ZITADEL_EXTERNALPORT
      value: "443"
    - name: ZITADEL_EXTERNALSECURE
      value: "true"
    - name: ZITADEL_TLS_ENABLED
      value: "false"
    - name: ZITADEL_DATABASE_POSTGRES_HOST
      value: intric-zitadel-postgres
    - name: ZITADEL_DATABASE_POSTGRES_PORT
      value: "5432"
    - name: ZITADEL_DATABASE_POSTGRES_DATABASE
      value: zitadel
    - name: ZITADEL_DATABASE_POSTGRES_ADMIN_USERNAME
      value: postgres
    - name: ZITADEL_DATABASE_POSTGRES_ADMIN_PASSWORD
      value: postgres
    - name: ZITADEL_DATABASE_POSTGRES_ADMIN_SSL_MODE
      value: "disable"
    - name: ZITADEL_DATABASE_POSTGRES_USER_USERNAME
      value: zitadel
    - name: ZITADEL_DATABASE_POSTGRES_USER_PASSWORD
      value: zitadel
    - name: ZITADEL_DATABASE_POSTGRES_USER_SSL_MODE
      value: "disable"
    # zitadel username for logging in takes on the format of <username>@<org_name>.<external_domain>
    - name: ZITADEL_FIRSTINSTANCE_ORG_NAME
      value: "REPLACE_THIS"  # ex: mycompany
    - name: ZITADEL_FIRSTINSTANCE_ORG_HUMAN_USERNAME
      value: "REPLACE_THIS"  # ex: admin
    - name: ZITADEL_FIRSTINSTANCE_ORG_HUMAN_PASSWORD
      value: "REPLACE_THIS_WITH_STRONG_PASSWORD"
    - name: ZITADEL_FIRSTINSTANCE_ORG_HUMAN_PASSWORDCHANGEREQUIRED
      value: "false"
    - name: ZITADEL_DEFAULTINSTANCE_FEATURES_LOGINV2_REQUIRED
      value: "false"
    - name: ZITADEL_FIRSTINSTANCE_ORG_MACHINE_MACHINE_USERNAME
      value: admin
    - name: ZITADEL_FIRSTINSTANCE_ORG_MACHINE_MACHINE_NAME
      value: "Automatically Initialized IAM_OWNER"
    - name: ZITADEL_FIRSTINSTANCE_ORG_MACHINE_PAT_EXPIRATIONDATE
      value: "2029-01-01T00:00:00Z"

# =============================================================================
# REQUIRED: Redis Configuration
# =============================================================================
redis:
  persistence:
    size: 1Gi

# =============================================================================
# REQUIRED: PostgreSQL Configuration
# =============================================================================
postgresql:
  persistence:
    size: 1Gi

# =============================================================================
# REQUIRED: S3 Object Storage Configuration (RustFS)
# env is now a list of { name, value }; keys: RUSTFS_ACCESS_KEY, RUSTFS_SECRET_KEY, RUSTFS_CONSOLE_ENABLE
# =============================================================================
s3:
  env:
    - name: RUSTFS_ACCESS_KEY
      value: "REPLACE_THIS"
    - name: RUSTFS_SECRET_KEY
      value: "REPLACE_THIS"
    - name: RUSTFS_ADDRESS
      value: "0.0.0.0:9000"
    - name: RUSTFS_CONSOLE_ADDRESS
      value: "0.0.0.0:9001"
    - name: RUSTFS_CONSOLE_ENABLE
      value: "true"
  persistence:
    size: 1Gi

# =============================================================================
# REQUIRED: Intric Backend API Server Configuration
# Full env list (overriding replaces defaults). S3 credentials here must match s3.env above.
# =============================================================================
intricBackendApiServer:
  env:
    - name: IMAGE_TO_TEXT_VISION_MODEL_URL
      value: ""
    - name: IMAGE_TO_TEXT_VISION_MODEL_NAME
      value: ""
    - name: IMAGE_TO_TEXT_VISION_MODEL_API_KEY
      value: ""
    - name: S3_BUCKET_NAME
      value: "REPLACE_THIS"
    - name: S3_ACCESS_KEY_ID
      value: "REPLACE_THIS"
    - name: S3_SECRET_ACCESS_KEY
      value: "REPLACE_THIS"
    - name: POSTGRES_USER
      value: "postgres"
    - name: POSTGRES_PASSWORD
      value: "REPLACE_THIS_WITH_STRONG_PASSWORD"
    - name: POSTGRES_DB
      value: "intric"
    - name: USING_ACCESS_MANAGEMENT
      value: "true"
    - name: USING_CRAWL
      value: "true"
    - name: USING_EMBEDDING_MODELS_WITH_USER_GROUPS
      value: "true"
    - name: USING_BACKGROUND_TASKS
      value: "true"
    - name: USING_SELF_SIGN_UP
      value: "true"
    - name: USING_ALLOW_CREATORS_TO_CREATE_WIDGETS
      value: "true"
    - name: USING_APPS
      value: "true"
    - name: USING_AZURE_MODELS
      value: "false"
    - name: USING_ARTIFACTS
      value: "true"
    - name: USING_PLANNING
      value: "true"
    - name: USING_ZITADEL
      value: "true"
    - name: USING_IAM
      value: "true"
    - name: ZITADEL_ENDPOINT
      value: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    - name: ZITADEL_OPENID_CONFIG_ENDPOINT
      value: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    - name: ZITADEL_PROJECT_CLIENT_ID
      value: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    - name: ZITADEL_PROJECT_ID
      value: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    - name: ZITADEL_ACCESS_TOKEN
      value: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    - name: ZITADEL_KEY_ENDPOINT
      value: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    - name: ZITADEL_AUDIENCE
      value: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    - name: ZITADEL_ISSUER
      value: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    - name: DEV
      value: "false"
    - name: NUM_WORKERS
      value: "1"
    - name: LOGLEVEL
      value: "INFO"
    - name: INTRIC_CORS_ALLOW_ALL
      value: "1"
    - name: MAX_IN_QUESTION
      value: "20"
    - name: USING_INTRIC_PROPRIETARY
      value: "true"
    - name: MONITORING_ENV
      value: "development"
    - name: SSL_CERT_FILE
      value: "/etc/ssl/certs/ca-certificates.crt"
    - name: CONFLUENCE_CLIENT_ID
      value: ""
    - name: SHAREPOINT_CLIENT_ID
      value: ""
    - name: API_PREFIX
      value: "/api/v1"
    - name: API_KEY_LENGTH
      value: "32"
    - name: API_KEY_HEADER_NAME
      value: "api-key"
    - name: JWT_AUDIENCE
      value: "beta"
    - name: JWT_ISSUER
      value: "inoolabs.com"
    - name: JWT_EXPIRY_TIME
      value: "10080"
    - name: JWT_ALGORITHM
      value: "HS256"
    - name: JWT_SECRET
      value: ""
    - name: JWT_TOKEN_PREFIX
      value: "Bearer "
    - name: INFINITY_URL
      value: "https://infinity.intric.ai"
    - name: VLLM_MODEL_URL
      value: "https://vllm.intric.ai"
    - name: WHISPER_MODEL_URL
      value: "https://whisper.intric.ai"
    - name: SCALEWAY_MODEL_PROVIDER_URL
      value: "https://api.scaleway.ai/v1"
    - name: OAUTH_CALLBACK_URL
      value: ""
    - name: SHAREPOINT_WEBHOOK_URL
      value: ""
    - name: PARAGON_PROJECT_ID
      value: ""
    - name: USING_PARAGON
      value: "false"
    - name: BROWSER_USE_URL
      value: ""
    - name: BROWSER_USE_API_KEY
      value: ""
    - name: BROWSER_USE_HEADER
      value: ""
    - name: UPLOAD_FILE_TO_SESSION_MAX_SIZE
      value: "26214400"
    - name: UPLOAD_IMAGE_TO_SESSION_MAX_SIZE
      value: "20971520"
    - name: UPLOAD_MAX_FILE_SIZE
      value: "20971520"
    - name: TRANSCRIPTION_MAX_FILE_SIZE
      value: "209715200"
    - name: OPENAI_API_KEY
      value: ""
    - name: ANTHROPIC_API_KEY
      value: ""
    - name: OVHCLOUD_API_KEY
      value: ""
    - name: TAVILY_API_KEY
      value: ""
    - name: MISTRAL_API_KEY
      value: ""
    - name: VLLM_API_KEY
      value: ""
    - name: BERGET_API_KEY
      value: ""
    - name: EXA_API_KEY
      value: ""
    - name: SCALEWAY_MODEL_PROVIDER_API_KEY
      value: ""
    - name: LINKUP_API_KEY
      value: ""
    - name: INTRIC_SUPER_API_KEY
      value: "CHANGE-ME-LONG-RANDOM-STRING"
    - name: INTRIC_SUPER_DUPER_API_KEY
      value: "CHANGE-ME-LONG-RANDOM-STRING"
    - name: URL_SIGNING_KEY
      value: "REPLACE_THIS_WITH_RANDOM_STRING"
    - name: CONFLUENCE_CLIENT_SECRET
      value: ""
    - name: SHAREPOINT_CLIENT_SECRET
      value: ""
    - name: PARAGON_PRIVATE_KEY
      value: ""

# =============================================================================
# Frontend: INTRIC_SYS_API_KEY must match backend INTRIC_SUPER_API_KEY
# =============================================================================
intricFrontendApp:
  env:
    - name: ZITADEL_INSTANCE_URL
      value: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    - name: ZITADEL_PROJECT_CLIENT_ID
      value: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    - name: PROTOCOL_HEADER
      value: "x-forwarded-proto"
    - name: HOST_HEADER
      value: "x-forwarded-host"
    - name: INTRIC_SYS_API_KEY
      value: "CHANGE-ME-LONG-RANDOM-STRING"

# =============================================================================
# Sandboxed Python Script Runner (env list: AUTH_TOKEN, SANDBOX_IMAGE_PULL_SECRET_NAME)
# =============================================================================
sandboxedPythonScriptRunner:
  env:
    - name: AUTH_TOKEN
      value: ""
    - name: SANDBOX_IMAGE_PULL_SECRET_NAME
      value: ""
