# Intric Helm Chart - Override Values Example
# Copy this file to values-override.yaml and customize for your deployment
# Deploy with: helm install intric ./intric-helm -f values-override.yaml

# =============================================================================
# OPTIONAL: Image Pull Credentials for Intric's Container Registry
# Only required if pulling from private repositories
# =============================================================================
# intricImagePullCredentials:
#   registry: ghcr.io
#   username: "REPLACE_THIS"
#   password: "REPLACE_THIS"

# =============================================================================
# REQUIRED: Domain Configuration
# =============================================================================
# ----- with clusterIssuer [RECOMMENDED] -----
ingress:
  enabled: true
  className: traefik # kubectl get ingressclasses - to see available ingress classes
  frontendHost: REPLACE_THIS # ex: abc.intric.ai
  backendHost: REPLACE_THIS  # ex: api.abc.intric.ai
  zitadelHost: REPLACE_THIS_ONLY_IF_YOU_ARE_SELF_HOSTING_ZITADEL # ex: auth.abc.intric.ai
  
  tls:
    enabled: true
  
  certManager:
    enabled: true
    clusterIssuer: REPLACE_THIS_WITH_YOUR_CLUSTER_ISSUER # kubectl get clusterissuer - to see available cluster issuers
# ----------------------------------------------------------------------------
# NOTE: If using manually created certificates:
# Add the certs to their respective secret names
# example for frontendSecretName:
# kubectl create secret tls intric-frontend-tls \
#   --cert=frontendtls.crt \
#   --key=frontendtls.key \
#   -n YOUR_NAMESPACE

# ----- without clusterIssuer [MANUAL CERTIFICATES] -----
# ingress:
#   enabled: true
#   className: traefik
#   frontendHost: REPLACE_THIS
#   backendHost: REPLACE_THIS
#   zitadelHost: REPLACE_THIS_ONLY_IF_YOU_ARE_SELF_HOSTING_ZITADEL
  
#   tls:
#     enabled: true
#     frontendSecretName: intric-frontend-tls
#     backendSecretName: intric-backend-tls
#     zitadelSecretName: zitadel-tls
    
#   certManager:
#     enabled: false
# ----------------------------------------------------------------------------

# =============================================================================
# OPTIONAL: Redis Configuration
# Override only if you need non-default settings
# =============================================================================
# redis:
#   persistence:
#     size: 16Gi  # Default is 8Gi
#   resources:
#     requests:
#       cpu: 200m
#       memory: 256Mi

# =============================================================================
# OPTIONAL: PostgreSQL Configuration
# Override only if you need non-default settings
# =============================================================================
# postgresql:
#   auth:
#     username: postgres
#     password: REPLACE_THIS_WITH_STRONG_PASSWORD
#     database: intric
#   persistence:
#     size: 500Gi  # Default is 400Gi

# =============================================================================
# OPTIONAL: Zitadel PostgreSQL Configuration
# Override only if you need non-default settings
# =============================================================================
# zitadel-postgres:
#   enabled: true
#   auth:
#     username: postgres
#     password: REPLACE_THIS_WITH_STRONG_PASSWORD
#     database: zitadel
#   persistence:
#     size: 16Gi  # Default is 8Gi

# =============================================================================
# REQUIRED: S3 Object Storage Configuration (RustFS)
# If using external S3, set enabled: false and configure via backend secret
# =============================================================================
s3:
  enabled: true
  env:
    accessKeyId: "REPLACE_THIS"
    secretAccessKey: "REPLACE_THIS"
  
  # Optional: Adjust storage size
  # persistence:
  #   size: 200Gi  # Default is 100Gi

# =============================================================================
# REQUIRED: Intric Backend API Server Configuration
# =============================================================================
intricBackendApiServer:
  # Image version (optional - leave commented to use default from values.yaml)
  # image: ghcr.io/inoolabs/intric-backend:v1.145.0
  
  env:
    ##### OCR - OPTIONAL - Point this to your own hosted ocr model if you have one #####
    # You can also ask Intric to give you access to intric's self-hosted ocr model
    # Note that Intric's self-hosted ocr model is in Sweden
    imageToTextVisionModelUrl: ""
    imageToTextVisionModelName: ""
    imageToTextVisionModelApiKey: ""
    ##### OCR #####

    ##### S3 #####
    s3BucketName: "REPLACE_THIS"
    ##### S3 #####

    ##### FEATURE FLAGS #####
    usingAccessManagement: true
    usingCrawl: true
    usingEmbeddingModelsWithUserGroups: true
    usingBackgroundTasks: true
    usingSelfSignUp: true
    usingAllowCreatorsToCreateWidgets: true
    usingApps: true
    usingAzureModels: false
    usingArtifacts: true
    usingPlanning: true
    ##### FEATURE FLAGS #####

    ##### AUTHENTICATION #####
    usingZitadel: true
    usingIam: true
    zitadelEndpoint: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    zitadelOpenidConfigEndpoint: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    zitadelProjectClientId: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    zitadelProjectId: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    zitadelAccessToken: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    zitadelKeyEndpoint: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    zitadelAudience: "REPLACE_THIS_ONLY_IF_YOU_ARE_USING_EXTERNAL_ZITADEL_ELSE_THE_SETUP_ZITADEL_SCRIPT_WILL_SET_THIS_FOR_YOU"
    ##### AUTHENTICATION #####

    ##### GENERAL SETTINGS #####
    dev: false
    numWorkers: 1
    loglevel: INFO
    intricCorsAllowAll: 1
    maxInQuestion: 20
    usingIntricProprietary: true
    monitoringEnv: "development"
    SSL_CERT_FILE: /etc/ssl/certs/ca-certificates.crt
    ##### GENERAL SETTINGS #####

    ##### LEGACY #####
    confluenceClientId: ""
    sharepointClientId: ""
    apiPrefix: /api/v1
    apiKeyLength: 32
    apiKeyHeaderName: api-key
    jwtAudience: beta
    jwtIssuer: inoolabs.com
    jwtExpiryTime: 10080
    jwtAlgorithm: HS256
    jwtSecret: ""
    jwtTokenPrefix: "Bearer "
    ##### LEGACY #####

    ##### URLS #####
    infinityUrl: https://infinity.intric.ai
    vllmModelUrl: https://vllm.intric.ai
    whisperModelUrl: https://whisper.intric.ai
    scalewayModelProviderUrl: https://api.scaleway.ai/v1
    oauthCallbackUrl: ""
    sharepointWebhookUrl: ""
    ##### URLS #####

    ##### PARAGON #####
    paragonProjectId: ""
    usingParagon: false
    ##### PARAGON #####

    ##### BROWSER USE #####
    browserUseUrl: ""
    browserUseApiKey: ""
    browserUseHeader: ""
    ##### BROWSER USE #####

    ##### MAX SIZES #####
    uploadFileToSessionMaxSize: 26214400
    uploadImageToSessionMaxSize: 20971520
    uploadMaxFileSize: 20971520
    transcriptionMaxFileSize: 209715200
    ##### MAX SIZES #####

    ##### API KEYS #####
    openaiApiKey: ""
    anthropicApiKey: ""
    ovhcloudApiKey: ""
    tavilyApiKey: ""
    mistralApiKey: ""
    vllmApiKey: ""
    bergetApiKey: ""
    exaApiKey: ""
    scalewayModelProviderApiKey: ""
    linkupApiKey: ""
    sandboxedPythonScriptRunnerAuthToken: ""
    intricSuperApiKey: ""
    intricSuperDuperApiKey: ""
    urlSigningKey: ""
    confluenceClientSecret: ""
    sharepointClientSecret: ""
    paragonPrivateKey: ""
    ##### API KEYS #####

# =============================================================================
# OPTIONAL: Backend Worker Configuration
# Override only if needed
# =============================================================================
# intricBackendWorker:
#   image: ghcr.io/inoolabs/intric-backend:v1.144.0
#   resources:
#     requests:
#       cpu: 500m
#       memory: 1Gi

# =============================================================================
# OPTIONAL: Frontend App Configuration
# Override only if needed
# =============================================================================
# intricFrontendApp:
#   image: ghcr.io/inoolabs/intric-frontend:1.75.0
#   resources:
#     requests:
#       cpu: 500m
#       memory: 1Gi

# =============================================================================
# OPTIONAL: Sandboxed Python Script Runner Configuration
# Override only if needed
# =============================================================================
# sandboxedPythonScriptRunner:
#   resources:
#     requests:
#       cpu: 500m
#       memory: 512Mi

# =============================================================================
# OPTIONAL: Zitadel Configuration (Self-Hosted IAM)
# Enable this if you want to deploy Zitadel within the cluster
# =============================================================================
zitadel:
  enabled: true  # Set to false if using external Zitadel
  externalDomain: "REPLACE_THIS"  # ex: auth.abc.intric.ai (without https://)
  externalPort: 443
  externalSecure: true
  masterkey: "REPLACE_THIS_WITH_32_CHARACTER_KEY"  # Use: openssl rand -base64 32 | head -c 32
  
  firstInstance:
    orgName: "REPLACE_THIS"  # ex: mycompany
    admin:
      # Final email will be: username@orgName.externalDomain
      # Example: admin@mycompany.auth.abc.intric.ai
      username: "REPLACE_THIS"  # ex: admin
      password: "REPLACE_THIS_WITH_STRONG_PASSWORD"
    
    machineUser:
      enabled: true
      username: admin
      name: "Automatically Initialized IAM_OWNER"
      patExpirationDate: "2029-01-01T00:00:00Z"
  
  # Optional: Override database connection
  # database:
  #   host: intric-zitadel-postgres
  #   port: 5432
  #   database: zitadel
  #   adminUsername: postgres
  #   adminPassword: postgres
  #   username: zitadel
  #   password: zitadel

